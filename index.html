<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript">
var TDConf = TDConf || {};
TDConf.Config = { 
  pageType: "Test",
  pageURL: window.location.href,
  orderId: "[ORDER_NUMBER]", 
  orderValue: "[ORDER_VALUE]",
  currency: "[CURRENCY]",
  voucher: "[VOUCHER]"
  };
</script>
</head>
<body>
<script id="swrap" type="text/javascript" src="https://swrap.tradedoubler.com/wrap?id=26240"></script>
<form id="runTest">
<label for="newContID">Container ID</label><br><br>
<input type="text" id="newContID" name="newContID"><br><br>
<label for="newPageType">PageType</label><br>
<input type="text" id="newPageType" name="newPageType"><br><br>
<label for="newOrdID">Order ID</label><br><br>
<input type="text" id="newOrdID" name="newOrdID" value="[ORDER_NUMBER]"><br><br>
<label for="newOrdVal">Order Value</label><br><br>
<input type="text" id="newOrdVal" name="newOrdVal" value="[ORDER_VALUE]"><br><br>
<label for="newOrdVal">Currency</label><br><br>
<input type="text" id="newCurrency" name="newCurrency" value="[CURRENCY]"><br><br>
<label for="newOrdVal">Voucher</label><br><br>
<input type="text" id="newVoucher" name="newVoucher" value="[VOUCHER]"><br><br>
<input type="submit" value="Submit">
</form><br><br>
<div id="wholeTest">
<strong>TD Conf.Config data </strong><br><br>
<div id="TDConfPageType">
</div><br>
<div id="TDConfPageURL">
</div><br>
<div id="TDConfOrderID">
</div><br>
<div id="TDConfOrderValue">
</div><br>
<div id="TDConfCurrency">
</div><br>
<div id="TDConfVoucher">
</div><br>
<strong>URL: </strong>
<div id="testurl">
</div>
<br>
<br>
<strong>PageType: </strong>
<div id="testType">
</div>
<br>
<br>
<strong>URL Match: </strong>
<div id="urlmatch">
</div>
<br>
<br>
<strong>PageType Match: </strong>
<div id="pagematch">
</div>
<br>
<br>
<strong>Result: </strong>
<div id="result"></div> 
<br>
<br>
</div>
<script>
$(document).ready(function () {
	$('#wholeTest').hide();
	$('#runTest').submit(function (e) {
		var swrapURL="https://swrap.tradedoubler.com/wrap?id=";
		swrapURL=swrapURL+$('#newContID').val();
		console.log(swrapURL);
		$('#swrap').attr('src',swrapURL);
		$('#wholeTest').show();
		TDConf.Config.pageType= $('#newPageType').val();
		TDConf.Config.orderID= $('#newOrdID').val();
		TDConf.Config.orderValue= $('#newOrdVal').val();
		TDConf.Config.currency= $('#newCurrency').val();
		TDConf.Config.voucher= $('#newVoucher').val();
//		var TDConfig = TDConf.Config;
//		var TDConfig2 = [];
//		$.each(TDConfig, function(idx2,val2) {                    
//			var str = idx2 + ":" + val2 + "<br>";
//			TDConfig2.push(str);
//		});
//		$('#TDConf').append('<p>'+TDConfig2+'</p>');
//		var comma = $('#TDConf');
//		comma.html(comma.html().replace(/\,/g, ''));
		$('#TDConfPageType').text('PageType='+TDConf.Config.pageType);
		$('#TDConfPageURL').text('PageURL='+TDConf.Config.pageURL);
		$('#TDConfOrderID').text('OrderID='+TDConf.Config.orderID);
		$('#TDConfOrderVal').text('OrderVal='+TDConf.Config.orderVal);
		$('#TDConfCurrency').text('Currency='+TDConf.Config.currency);
		$('#TDConfVoucher').text('Voucher='+TDConf.Config.voucher);
		$('#testurl').text(window.location.href);
		$('#testType').text(TDConf.Config.pageType);
//	$(function () {
		//var iframesrc = $('iframe').attr('src');
		//console.log(iframesrc);

		if (tdm !==null || tdm =='undefined')
		{
		$('#urlmatch').text('Match value - '+tdu+'   ||   Successful match - True');
//		$('#urlmatch').append('<p>Match value - '+tdu+'<br><br><p>Successful match - True </p>');
		}
		else{
		$('#urlmatch').text('Match value - '+tdu+'   ||  Successful match - False');
//		$('#urlmatch').append('<p>Match value - '+tdu+'<br><br><p>Successful match - False </p>');
		}
		if (tdpm !==null || tdpm =='undefined')
		{
		$('#pagematch').text('Match value - '+tdp+'   ||   Successful match - True');
		}
		else
		{
		$('#pagematch').text('Match value - '+tdp+'   ||  Successful match - False');
		};
		if($('body').is(':contains("tbs.tradedoubler.com")'))
			{
			$('#result').text('Success');
			const TDpxi = $('iframe').attr('src');
			$('#result').append(TDpxi);
			}
			else{
			$('#result').text('Failed');
			}
		e.preventDefault();
});});
//);
</script>
</body>
</html>